<!DOCTYPE html>
<html lang="en" dir="jp">
  <head>
    <meta charset="utf-8">

    <title></title>
  </head>
  <body>
    <canvas id="canvas" width="600" height="700"></canvas>
    <!-- ボタンの設置 -->
    <!--outline:noneでボタンの枠を消す -->
 <input type="image" src="akamaru.jpg" id="osu" style="width:130px;height:130px; outline:none;  position: relative; left: -370px; top: -270px"/ onclick="ring();">

 <audio id="audio" preload="auto">
 	<source src="reco.mp3" type="audio/mp3">
 	<source src="reco.wav" type="audio/wav">
 </audio>



  <script>

  ///////////////////////////
    let n=0;
    function ring(){
      //canvasの準備
      　  let canvas = document.getElementById('canvas');
      　  let ctx = canvas.getContext('2d');
        //canvas内を白紙にする(ボタンを複数回押したときに数字がかぶるのを避けるため)
          ctx.clearRect(0, 0, 150, 150);

          let img=new Image();
          img.src='singou.jpg';
          img.onload = function(){
          ctx.drawImage(img,0,0);

          n=n+1;

          ctx.fillStyle = "red";
          ctx.font="80px serif";
          ctx.fillText("へえ", 230, 210);

          ctx.fillStyle = "red";
          ctx.font="80px serif";
          ctx.fillText(n-1, 260, 580);


        }


        // 対象となるID名
	       var id = 'audio' ;

	        // 初回以外だったら音声ファイルを巻き戻す
	         if( typeof( document.getElementById( id ).currentTime ) != 'undefined' )
	          {
		            document.getElementById( id ).currentTime = 0;
	             }

	// [ID:sound-file]の音声ファイルを再生[play()]する
	document.getElementById( id ).play() ;


        // [audio]には、<audio></audio>のエレメントが入っているとする

        // ブラウザが[.mp3]に対応している場合は[.mp3]を読み込む
        if(audio.canPlayType('audio/mp3'))
        {
	         audio.src='reco.mp3';
           document.getElementById("audio").load();
           document.getElementById("audio").play();
         }

         // ブラウザが[.wav]に対応している場合は[.wav]を読み込む
         else if(audio.canPlayType('audio/wav'))
         {
	          audio.src='reco.wav';
            document.getElementById("audio").load();
            document.getElementById("audio").play();
          }




    }






  </script>




  </body>
</html>
